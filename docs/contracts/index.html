<!DOCTYPE html>





<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  
    
    Contracts
  
 | The Computable Book</title>



<link rel="stylesheet" href="../../book.min.f4161f5e2de53a2e927f51df1611323a2a12cccb2681f23cb6fc3517852e8643.css">


<link rel="icon" href="../../favicon.png" type="image/x-icon">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://computablelabs.github.io/compspec/">The Computable Book</a>
</h2>



    
  
  
  

  <style>
  nav ul a[href$="\2f docs\2f contracts\2f "] {
      color: #0b3a53;
  }
  </style>

<ul>
<li><a href="../../"><strong>Introduction</strong></a></li>
<li><a href="../../docs/contracts/">Contracts</a></li>
<li><a href="../../docs/ethertoken/">Ether Token</a></li>
<li><a href="../../docs/markettoken/">Market Token</a></li>
<li><a href="../../docs/voting/">Voting</a></li>
<li><a href="../../docs/listings/">Listings</a></li>
<li><a href="../../docs/reserve/">Reserve</a></li>
<li><a href="../../docs/datatrust/">Datatrusts</a></li>
<li><a href="../../docs/parameters/">Market Parameters</a></li>
<li><a href="../../docs/capi/">CAPI</a></li>
<li><a href="../../docs/libraries/">Developer Libraries</a></li>
<li><a href="../../docs/userjourney/">User Journeys</a></li>
<li><a href="../../docs/attacks/">Attacks</a></li>
<li><a href="../../docs/continuing/">Continuing Your Journey</a></li>
</ul>





</nav>


  
<script>
(function() {
  var menu = document.querySelector('aside.book-menu nav')
  addEventListener('beforeunload', function(event) {
    localStorage.setItem('menu.scrollTop', menu.scrollTop)
  });
  menu.scrollTop = localStorage.getItem('menu.scrollTop')
})()
</script>



    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="../../svg/menu.svg" alt="Menu" />
  </label>
  <strong>
  
    
    Contracts
  
</strong>
</header>

      
<article class="markdown">

<h1 id="the-computable-contracts">The Computable Contracts</h1>

<p>In this chapter , we&rsquo;ll briefly review the smart
contracts that form the core of the Computable
protocol. If you haven&rsquo;t encountered smart contracts
before, you might not have a clear idea of what they
are. Briefly put, they are programs that run on the
Ethereum blockchain. You might ask, why is this
important? How is it different from just running a
program on the cloud? The main difference is that smart
contracts run in duplicate on every one of the
thousands of nodes that constitute Ethereum. This means
that a smart contract is effectively a program that is
guaranteed to execute correctly, since there are enough
honest nodes on Ethereum that fraudulent execution will
be caught. This means that smart contracts are
incredibly robust programs that can be invoked by
anyone who has network access to Ethereum.</p>

<p>This robustness means that smart contracts are often
used to handle financial transactions. Ledgers of all
sorts are run on Ethereum. The most famous examples of
such ledgers is probably
<a href="https://en.wikipedia.org/wiki/ERC-20">ERC-20</a>, a
standard for &ldquo;tokens.&rdquo; Tokens are a type of currency,
where the ledger &ldquo;on-chain&rdquo; (on Ethereum that is)
stores the current balances of every person who owns
some &ldquo;tokens.&rdquo; It&rsquo;s worth noting that smart contracts
on Ethereum are Turing-complete, so more complex
programs can be implemented via smart contracts as
well. In fact, Computable is implemented as a series of
smart contracts on Ethereum. Computable&rsquo;s contracts are
considerably more complex than simple ERC-20 contracts,
so we&rsquo;ll spend the next few chapters reviewing these
contracts in detail.</p>

<h2 id="a-rapidfire-overview-of-the-computable-contracts">A Rapidfire Overview of the Computable Contracts</h2>

<p>The stable version of the Computable contracts lives in
the
<a href="https://github.com/computablelabs/computable">Computable</a>
repo. These are the tested, hardened versions of the
contracts and are only updated for major releases. The
developer version lives in the
<a href="https://github.com/computablelabs/goest">Goest</a> repo.
We’ve built a number of developer utilities in there,
including a custom testing framework that integrates
closely with Geth’s tooling to provide a believable
simulator engine. If you’ve ever wondered how to
compile, deploy and test your Vyper smart contracts
(Vyper is a language for writing smart contracts) with
an alternative to popular Javascript frameworks, this
is how we do it.</p>

<p>The “data market” itself is split across a series of 7
core contracts.  You might ask why we didn’t just
create one monolith contract that implements the data
market. Well, monoliths don’t scale. As complexity
grows it would be harder and harder to devise
abstractions and permissions controls. More importantly
however (and this you may not know) there is a ~24 kb
limit on the size of a smart contract on the EVM (the
Ethereum virtual machine, the &ldquo;processor&rdquo; that runs on
Ethereum). There are more reasons, but most are simply
based around the proper design of good software. We can
save those discussions however for elsewhere in the
<a href="https://forum.computable.io/c/developers">developer forums</a>.</p>

<p>The on-chain components of the Computable protocol
control economics and access control.  If a user wants
to gain access to a particular dataset (in a particular
data market), or if a user wants to support a
particular data market, they have to seek on-chain
authorization.  If a user wants to pay for access to
data, this is also done off-chain. The advantage of
this structure is that payments and authorization can
be handled securely by secure on-chain contracts.</p>

<p>The contracts are interlinked in the following fashion</p>

<p><img src="../../contracts.png" alt="Contract Diagram" /></p>

<p>In this diagram, arrows correspond to dependencies. An
outgoing arrow indicates that this contract is
dependent on the contract on the other end. The
contracts are numbered such that contract <code>i</code> is not
dependent on contract <code>j</code> for <code>j &gt; i</code>. We’ll discuss the
contracts in order:</p>

<ul>
<li><code>EtherToken</code>: This contract is a form of wrapped Ether.
It wraps ETH into an ERC-20 interface that makes it
easy to work with. The first step for working with the
data market protocol is to transfer some ETH into
EtherToken.</li>
<li><code>MarketToken</code>: This contract is an ERC-20 that tracks
ownership in the current data market.</li>
<li><code>Voting</code>: This contract governs voting in the data
market. Recall that votes control a number of
critical operations in the protocol, such as the
decision of whether to admit a new listing to the
market, and whether to change the core parameters that
govern the market.</li>
<li><code>Parameterizer</code>: This contract governs the set of
parameters which control the market’s behaviors.</li>
<li><code>Reserve</code>: This contract governs the data market’s
reserve. In particular, this contract exposes the
“algorithmic price curve” which governs how patrons can
support and withdraw from the market.</li>
<li><code>Datatrust</code>: This contract governs the interaction of
the datatrust with the core market. In particular,
the “delivery flow” which controls how data is
purchased is handled by this contract.</li>
<li><code>Listing</code>: This contract governs the addition of new
chunks of data (“listings”) into the data market.</li>
</ul>

<p>Don&rsquo;t worry if you didn&rsquo;t follow all that. The next several chapters will dive into each of these smart contracts in much greater detail.</p>

<p>You might notice that some of the contracts have other
contract names specified in small red font underneath.
These contracts have “privilege” in the current
contract. Contracts with privilege have the ability to
call certain special methods in the current contract.
For example, <code>Listing</code> and <code>Reserve</code> have privilege with
the <code>MarketToken</code> contract. Precisely, this means that
these contracts have the ability to mint and burn
<code>MarketToken</code>. This privilege structure is needed to
implement the algorithmic buy/sell curve for patrons.
As you’re reading through the contracts, you might find
it useful to keep this privilege structure in your head
so you can understand how the set of contracts
interlocks with one another. It is also worth noting
that the privilege mechanism serves in a security role
as well, preventing random accounts from having the
ability to perform certain actions (like mint tokens).</p>

<p>As we mentioned above, one of the differentiating
factors of our implementation is that we’ve chosen to
use <a href="https://github.com/ethereum/vyper">Vyper</a> for our
contract implementation instead of
<a href="https://github.com/ethereum/solidity">Solidity</a> (the
most popular smart contract development platform).
There were a number of factors that drove this choice.
For one, the fact that Vyper defaults to safe math made
our implementation of the algorithmic price curve
dramatically simpler (you&rsquo;ll learn what these terms
mean in detail).  Although Vyper is still beta
software, we’ve found that it’s well written, well
maintained and well suited to our efforts.</p>

<h2 id="last-thoughts">Last Thoughts</h2>

<p>This chapter gave you a high level overview of all the
Computable contracts. In the next chapter, we&rsquo;ll go
much deeper on the first of these contracts, the
<code>EtherToken</code>.</p>

<div style="text-align: right"> <a href="../../docs/ethertoken">Next Chapter</a> </div>
</article>

      
<div class="book-footer justify-between">
  
  <div>
    
    <a href="https://github.com/computablelabs/compspec/commit/144783093ef1212e2c933a732b2c9c6770e29b1d" title='Last modified Jul 15, 2019 by Bharath Ramsundar' target="_blank" rel="noopener">
      <img src="../../svg/calendar.svg" alt="Changed" /> Jul 15, 2019
    </a>
  </div>
  
  
  <div>
    <a href="https://github.com/computablelabs/compspec/edit/master/docs/contracts.md" target="_blank" rel="noopener">
      <img src="../../svg/edit.svg" alt="Edit" /> Edit this page
    </a>
  </div>
  
</div>


      
    </div>

    
  

  <aside class="book-toc level-6 fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#the-computable-contracts">The Computable Contracts</a>
<ul>
<li><a href="#a-rapidfire-overview-of-the-computable-contracts">A Rapidfire Overview of the Computable Contracts</a></li>
<li><a href="#last-thoughts">Last Thoughts</a></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>
  
  
  
</body>

</html>
