<!DOCTYPE html>





<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  
    
    Contracts
  
 | Computable Spec</title>



<link rel="stylesheet" href="../../book.min.f4161f5e2de53a2e927f51df1611323a2a12cccb2681f23cb6fc3517852e8643.css">


<link rel="icon" href="../../favicon.png" type="image/x-icon">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://computablelabs.github.io/compspec/">Computable Spec</a>
</h2>



    
  
  
  

  <style>
  nav ul a[href$="\2f docs\2f contracts\2f "] {
      color: #0b3a53;
  }
  </style>

<ul>
<li><a href="../../"><strong>Introduction</strong></a></li>
<li><a href="../../docs/contracts/">Contracts</a></li>
<li><a href="../../docs/datatrust/">Datatrusts</a></li>
</ul>





</nav>


  
<script>
(function() {
  var menu = document.querySelector('aside.book-menu nav')
  addEventListener('beforeunload', function(event) {
    localStorage.setItem('menu.scrollTop', menu.scrollTop)
  });
  menu.scrollTop = localStorage.getItem('menu.scrollTop')
})()
</script>



    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="../../svg/menu.svg" alt="Menu" />
  </label>
  <strong>
  
    
    Contracts
  
</strong>
</header>

      
<article class="markdown"><p>All the contracts for the protocol currently deployed are in the
computable repo. We are currently only deploying to a private test
network, but as we deploy them to public test-nets and, eventually,
main-net, we will update the README of this repo with their addresses
and any other related information.</p>

<p>For the more dev-minded amongst you, our contracts are actively
developed here. We’ve built a number of developer utilities in there,
including a custom testing framework that integrates closely with
Geth’s tooling to provide a believable simulator engine. If you’ve
ever wondered how to compile, deploy and test your Vyper smart
contracts with an alternative to popular Javascript frameworks, this
is how we do it.</p>

<p>The “data market” itself is split across a series of 7 core contracts.
You might ask why we didn’t just create one monolith contract that
implements the data market. Well, monoliths don’t scale. As complexity
grows it would be harder and harder to devise abstractions and
permissions controls. More importantly however, and this you may not
know, there is a ~24 kb limit on the size of a smart contract on the
EVM. There are more reasons, but most are simply based around the
proper design of good software. We can save those discussions however
for elsewhere in the dev forums. Moving on: The contracts are
interlinked in the following fashion</p>

<p><img src="contracts.png" alt="Contract Diagram" /></p>

<p>In this diagram, arrows correspond to dependencies. An outgoing arrow indicates that this contract is dependent on the contract on the other end. The contracts are numbered such that contract i is not dependent on contract j for j &gt; i. We’ll discuss the contracts in order:</p>

<ul>
<li>EtherToken: This contract is a form of wrapped Ether. It wraps ETH into an ERC20 interface that makes it easy to work with. The first step for working with the data market protocol is to transfer some ETH into EtherToken.</li>
<li>MarketToken: This contract is an ERC20 that tracks ownership in the current data market.</li>
<li>Voting: This contract governs voting in the data market. Recall that votes control a number of critical operations in the protocol, such as the decision of whether to admit a new listing to the market, and whether to change the core parameters that govern the market.</li>
<li>Parameterizer: This contract governs the set of parameters which control the market’s behaviors.</li>
<li>Reserve: This contract governs the data market’s reserve. In particular, this contract exposes the “algorithmic price curve” which governs how patrons can support and withdraw from the market.</li>
<li>Datatrust: This contract governs the interaction of the datatrust with the core market. In particular, the “delivery flow” which controls how data is purchased is handled by this contract.</li>
<li>Listing: This contract governs the addition of new chunks of data (“listings”) into the data market.</li>
</ul>

<p>You might notice that some of the contracts have other contract names
specified in small red font underneath. These contracts have
“privilege” in the current contract. Contracts with privilege have the
ability to call certain special methods in the current contract. For
example, Listing and Reserve have privilege with the MarketToken
contract. Precisely, this means that these contracts have the ability
to mint and burn MarketToken. This privilege structure is needed to
implement the algorithmic buy/sell curve for patrons. As you’re
reading through the contracts, you might find it useful to keep this
privilege structure in your head so you can understand how the set of
contracts interlocks with one another. It is also worth noting that
the privilege mechanism serves in a security role as well, preventing
random accounts from having the ability to perform certain actions
(like mint tokens).</p>

<p>One of the differentiating factors of our implementation is that we’ve
chosen to use Vyper for our contract implementation. There were a
number of factors that drove this choice. For one, the fact that Vyper
defaults to safe math made our implementation of the algorithmic price
curve dramatically simpler. Although Vyper is still beta software,
we’ve found that it’s well written, well maintained and well suited to
our efforts.</p>
</article>

      
<div class="book-footer justify-between">
  
  <div>
    
    <a href="https://github.com/computablelabs/compspec/commit/144783093ef1212e2c933a732b2c9c6770e29b1d" title='Last modified Jul 15, 2019 by Bharath Ramsundar' target="_blank" rel="noopener">
      <img src="../../svg/calendar.svg" alt="Changed" /> Jul 15, 2019
    </a>
  </div>
  
  
  <div>
    <a href="https://github.com/computablelabs/compspec/edit/master/docs/contracts.md" target="_blank" rel="noopener">
      <img src="../../svg/edit.svg" alt="Edit" /> Edit this page
    </a>
  </div>
  
</div>


      
    </div>

    
  



  </main>
  
  
  
</body>

</html>
