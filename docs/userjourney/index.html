<!DOCTYPE html>





<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  
    
    Userjourney
  
 | The Computable Book</title>



<link rel="stylesheet" href="../../book.min.f4161f5e2de53a2e927f51df1611323a2a12cccb2681f23cb6fc3517852e8643.css">


<link rel="icon" href="../../favicon.png" type="image/x-icon">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://computablelabs.github.io/compspec/">The Computable Book</a>
</h2>



    
  
  
  

  <style>
  nav ul a[href$="\2f docs\2fuserjourney\2f "] {
      color: #0b3a53;
  }
  </style>

<ul>
<li><a href="../../"><strong>Introduction</strong></a></li>
<li><a href="../../docs/contracts/">Contracts</a></li>
<li><a href="../../docs/ethertoken/">Ether Token</a></li>
<li><a href="../../docs/markettoken/">Market Token</a></li>
<li><a href="../../docs/voting/">Voting</a></li>
<li><a href="../../docs/listings/">Listings</a></li>
<li><a href="../../docs/reserve/">Reserve</a></li>
<li><a href="../../docs/datatrust/">Datatrusts</a></li>
<li><a href="../../docs/parameters/">Market Parameters</a></li>
<li><a href="../../docs/capi/">CAPI</a></li>
<li><a href="../../docs/libraries/">Developer Libraries</a></li>
<li><a href="../../docs/userjourney/">User Journeys</a></li>
<li><a href="../../docs/attacks/">Attacks</a></li>
<li><a href="../../docs/continuing/">Continuing Your Journey</a></li>
</ul>





</nav>


  
<script>
(function() {
  var menu = document.querySelector('aside.book-menu nav')
  addEventListener('beforeunload', function(event) {
    localStorage.setItem('menu.scrollTop', menu.scrollTop)
  });
  menu.scrollTop = localStorage.getItem('menu.scrollTop')
})()
</script>



    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="../../svg/menu.svg" alt="Menu" />
  </label>
  <strong>
  
    
    Userjourney
  
</strong>
</header>

      
<article class="markdown">

<h1 id="user-journeys">User Journeys</h1>

<p>In this chapter, you&rsquo;ll learn about the user-signed
contract method calls required to fulfill various
actions you might like to do with the Computable protocol.</p>

<p>Let&rsquo;s start by noting that user-originated contract
method calls must be signed by the user’s private key,
which means you as the user are probably confirming
signing through a Metamask dialog. This is the
technique the first Computable dapps are using.</p>

<p>Second, contract method calls are asynchronous and may
take an indefinite amount of time since they only
complete when 1 (or really several) Ethereum blocks are mined. As you&rsquo;ll see in the <a href="../attacks/index.html">next chapter</a>, this can make a difference for security.</p>

<h2 id="apply-for-a-listing">Apply for a Listing</h2>

<p>Here&rsquo;s the sequence of actions that happens upon listing application:</p>

<ul>
<li><code>Listing.list</code>: Apply for a listing. Voting happens
by other parties. Data is sent to Datatrust and which
calls setDataHash. Assume listing passes. Someone calls
Listing.resolveApplication and listing is ready to be
used.</li>
</ul>

<p>After resolution, the applicant may claim the listing
reward (see Withdraw Support from a Market).</p>

<h2 id="support-a-market">Support a Market</h2>

<p>Here&rsquo;s the sequence of actions a patron takes to
support a data market:</p>

<ul>
<li><p><code>EtherToken.deposit</code>: Wrap ETH into an ERC20 compatible token so that contracts can manipulate it.</p></li>

<li><p><code>EtherToken.approve</code>: Call with deployed Reserve
contract address to give that contract permission to
change.</p></li>

<li><p><code>Reserve.support</code>: Convert <code>EtherToken</code> to
<code>MarketToken</code> at price from bonding curve.</p></li>
</ul>

<h2 id="withdraw-support-from-a-market">Withdraw Support from a Market</h2>

<p>Assume user has <code>MarketToken</code>. Note this flow applies
regardless of how <code>MarketToken</code> was acquired. User may
have supported the market with ETh or acquired by
creating a listing.</p>

<ul>
<li><p><code>Listing.withdrawFromListing</code>: Call only if user has
MarketTokens acquired through initial listing or
listing access. Transfers MarketTokens to MarketToken
contract so that it is available for withdraw.</p></li>

<li><p><code>Reserve.withdraw</code>: Convert MarketToken to EtherToken
at price from bonding curve.</p></li>

<li><p><code>EtherToken.withdraw</code>: Convert EtherToken to plain
Eth.</p></li>
</ul>

<h2 id="vote-on-a-listing-candidate-or-listing-challenge">Vote on a Listing Candidate or Listing Challenge</h2>

<p>Assume user has enough MarketToken to stake a vote, and
there is a listing to vote on. TODO: is this same
process for other votes like electing a DataTrust?</p>

<ul>
<li><p><code>Voting.vote</code>: Supply ‘yeah’ or ‘nay’ vote as an
argument. The user’s stake will be tied up during the
voting period.</p></li>

<li><p><code>Voting.unstake</code>: After the voting period is over,
get the stake back.</p></li>
</ul>

<h2 id="challenge-listing">Challenge Listing</h2>

<p>Assume challenger has enough <code>MarketToken</code> to stake the
challenge.</p>

<ul>
<li><p><code>Listing.challenge</code>: Start the challenge.
Stakeholders then vote. Someone must call
Listing.resolveChallenge after the voting period.</p></li>

<li><p><code>Voting.unstake</code>: If the challenge succeeds, the
challenger calls this method to get stake back. If the
challenge failed, the listing owner calls this method
to take the challenger’s stake.</p></li>
</ul>

<h2 id="buy-access-to-a-listing">Buy Access to a Listing</h2>

<ul>
<li><p><code>EtherToken.deposit</code>: Wrap ETH into an ERC20
compatible token so that contracts can manipulate it.</p></li>

<li><p><code>EtherToken.approve</code>: Call with deployed Datatrust
contract address to give that contract permission to
change.</p></li>

<li><p><code>Datatrust.requestDelivery</code>: “Deposit” funds to pay
for access to listings at the market’s rate per byte.</p></li>
</ul>

<p>User then tells Datatrust which listing to access.
Datatrust calls <code>Datatrust.listingAccessed</code>, which
deducts from the number of bytes user has paid for.
Datatrust delivers listing data to client and calls
<code>Datatrust.delivered</code> to collect its fee.</p>

<p>TODO, Other Governance Actions like reparameterize, elect DataTrust, etc</p>

<h2 id="last-thoughts">Last Thoughts</h2>

<p>Now that you have an understanding of the Computable
developer ecosystem, tools and flows, you should gain an
understanding of the security threats that face the
Computable ecosystem. Crypto always brings risks as
you&rsquo;ll learn in the next chapter.</p>

<div style="text-align: right"> <a href="../../docs/attacks">Next Chapter</a> </div>
</article>

      
<div class="book-footer justify-between">
  
  <div>
    
    <a href="https://github.com/computablelabs/compspec/commit/d2570507cd2463dbebde8c76007e74f299679147" title='Last modified Jul 18, 2019 by Bharath Ramsundar' target="_blank" rel="noopener">
      <img src="../../svg/calendar.svg" alt="Changed" /> Jul 18, 2019
    </a>
  </div>
  
  
  <div>
    <a href="https://github.com/computablelabs/compspec/edit/master/docs/userjourney.md" target="_blank" rel="noopener">
      <img src="../../svg/edit.svg" alt="Edit" /> Edit this page
    </a>
  </div>
  
</div>


      
    </div>

    
  

  <aside class="book-toc level-6 fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#user-journeys">User Journeys</a>
<ul>
<li><a href="#apply-for-a-listing">Apply for a Listing</a></li>
<li><a href="#support-a-market">Support a Market</a></li>
<li><a href="#withdraw-support-from-a-market">Withdraw Support from a Market</a></li>
<li><a href="#vote-on-a-listing-candidate-or-listing-challenge">Vote on a Listing Candidate or Listing Challenge</a></li>
<li><a href="#challenge-listing">Challenge Listing</a></li>
<li><a href="#buy-access-to-a-listing">Buy Access to a Listing</a></li>
<li><a href="#last-thoughts">Last Thoughts</a></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>
  
  
  
</body>

</html>
